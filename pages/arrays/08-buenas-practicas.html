<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buenas Pr√°cticas - Curso de JavaScript</title>
    <link rel="stylesheet" href="../../styles/variables.css">
    <link rel="stylesheet" href="../../styles/reset.css">
    <link rel="stylesheet" href="../../styles/components.css">
    <link rel="stylesheet" href="../../styles/responsive.css">
    <script src="../../scripts/navigation.js"></script>
    <script src="../../scripts/theme.js"></script>
</head>
<body>
    <main class="page-content">
        <div class="container">
            <div class="breadcrumb">
                <a href="../../index.html">Home</a>
                <span class="breadcrumb-separator">/</span>
                <a href="../temario-global.html">Temario Global</a>
                <span class="breadcrumb-separator">/</span>
                <a href="../temario-arrays.html">Arrays</a>
                <span class="breadcrumb-separator">/</span>
                <span>Buenas Pr√°cticas</span>
            </div>
            
            <section class="section">
                <h1 class="section-title">8. Buenas Pr√°cticas con Arrays</h1>
                
                <div class="content-section">
                    <h2>8.1. Evitar mutaciones innecesarias</h2>
                    <p>Modificar un array directamente (mutaci√≥n) puede llevar a bugs dif√≠ciles de detectar, especialmente en aplicaciones grandes.</p>
                    
                    <h3>‚ùå Mal - Mutaci√≥n directa:</h3>
                    <pre><code>const numeros = [1, 2, 3];
numeros.push(4); // Muta el array original
numeros[0] = 10; // Modifica el array original

console.log(numeros); // [10, 2, 3, 4]</code></pre>
                    
                    <h3>‚úÖ Bien - Crear nuevos arrays:</h3>
                    <pre><code>const numeros = [1, 2, 3];

// Agregar elementos sin mutar
const conNuevo = [...numeros, 4];

// Modificar elementos sin mutar
const modificado = numeros.map((num, i) => i === 0 ? 10 : num);

console.log(numeros);      // [1, 2, 3] - No se modifica
console.log(conNuevo);     // [1, 2, 3, 4]
console.log(modificado);   // [10, 2, 3]</code></pre>
                </div>
                
                <div class="content-section">
                    <h2>8.2. Uso de m√©todos inmutables</h2>
                    <p>Prefiere m√©todos que devuelven nuevos arrays en lugar de modificar el original.</p>
                    
                    <h3>M√©todos que mutan el array original:</h3>
                    <ul>
                        <li><code>push()</code>, <code>pop()</code></li>
                        <li><code>shift()</code>, <code>unshift()</code></li>
                        <li><code>splice()</code></li>
                        <li><code>sort()</code></li>
                        <li><code>reverse()</code></li>
                    </ul>
                    
                    <h3>M√©todos que NO mutan (devuelven nuevo array):</h3>
                    <ul>
                        <li><code>map()</code>, <code>filter()</code>, <code>reduce()</code></li>
                        <li><code>slice()</code></li>
                        <li><code>concat()</code></li>
                        <li><code>flat()</code>, <code>flatMap()</code></li>
                    </ul>
                    
                    <h3>Alternativas inmutables:</h3>
                    <pre><code>const numeros = [3, 1, 4, 1, 5];

// En lugar de sort() (muta)
const ordenado = [...numeros].sort((a, b) => a - b);
// o
const ordenado2 = numeros.slice().sort((a, b) => a - b);

// En lugar de reverse() (muta)
const invertido = [...numeros].reverse();

// En lugar de push() (muta)
const conNuevo = [...numeros, 9];

// En lugar de splice() (muta) para eliminar elemento
const sinSegundo = numeros.filter((_, i) => i !== 1);

console.log(numeros); // [3, 1, 4, 1, 5] - Original intacto</code></pre>
                </div>
                
                <div class="content-section">
                    <h2>8.3. Manejo de errores comunes con arrays</h2>
                    
                    <h3>Error 1: Acceso a √≠ndices fuera de rango</h3>
                    <pre><code>const frutas = ['manzana', 'banana'];

// ‚ùå No verifica si existe
console.log(frutas[5].toUpperCase()); // Error: Cannot read property

// ‚úÖ Verifica antes de usar
if (frutas[5]) {
    console.log(frutas[5].toUpperCase());
}

// ‚úÖ Mejor: usar optional chaining
console.log(frutas[5]?.toUpperCase()); // undefined</code></pre>
                    
                    <h3>Error 2: Modificar array durante iteraci√≥n</h3>
                    <pre><code>const numeros = [1, 2, 3, 4, 5];

// ‚ùå Mal - Modifica mientras itera
numeros.forEach((num, i) => {
    if (num % 2 === 0) {
        numeros.splice(i, 1); // Causa problemas
    }
});

// ‚úÖ Bien - Usa filter
const impares = numeros.filter(num => num % 2 !== 0);
console.log(impares); // [1, 3, 5]</code></pre>
                    
                    <h3>Error 3: Comparar arrays con ==</h3>
                    <pre><code>const arr1 = [1, 2, 3];
const arr2 = [1, 2, 3];

// ‚ùå Siempre ser√° false (compara referencias)
console.log(arr1 == arr2);   // false
console.log(arr1 === arr2);  // false

// ‚úÖ Comparar contenido
const sonIguales = JSON.stringify(arr1) === JSON.stringify(arr2);
console.log(sonIguales); // true

// ‚úÖ Comparaci√≥n m√°s robusta
const sonIguales2 = arr1.length === arr2.length && 
    arr1.every((val, i) => val === arr2[i]);</code></pre>
                    
                    <h3>Error 4: No validar que sea un array</h3>
                    <pre><code>function procesarArray(datos) {
    // ‚ùå Asume que es un array
    return datos.map(x => x * 2); // Error si datos no es array
}

function procesarArraySeguro(datos) {
    // ‚úÖ Valida primero
    if (!Array.isArray(datos)) {
        throw new Error('Se esperaba un array');
    }
    return datos.map(x => x * 2);
}</code></pre>
                    
                    <h3>Error 5: Copia superficial vs profunda</h3>
                    <pre><code>const original = [{ nombre: 'Ana' }, { nombre: 'Luis' }];

// ‚ùå Copia superficial - los objetos se comparten
const copia = [...original];
copia[0].nombre = 'Mar√≠a';
console.log(original[0].nombre); // 'Mar√≠a' - ¬°Se modific√≥!

// ‚úÖ Copia profunda
const copiaReal = JSON.parse(JSON.stringify(original));
// o con structuredClone (moderno)
const copiaReal2 = structuredClone(original);</code></pre>
                </div>
                
                <div class="content-section">
                    <h2>Consejos adicionales</h2>
                    
                    <div class="card">
                        <h3>üéØ Usa const para arrays</h3>
                        <p>Aunque no previene la mutaci√≥n, evita reasignaciones accidentales.</p>
                        <pre><code>const numeros = [1, 2, 3];
// numeros = [4, 5, 6]; // Error
numeros.push(4); // Permite mutaci√≥n (usa m√©todos inmutables)</code></pre>
                    </div>
                    
                    <div class="card" style="margin-top: 1rem;">
                        <h3>üéØ Nombres descriptivos</h3>
                        <pre><code>// ‚ùå Nombres poco claros
const arr = [1, 2, 3];
const data = ['Ana', 'Luis'];

// ‚úÖ Nombres descriptivos
const edades = [25, 30, 22];
const nombresUsuarios = ['Ana', 'Luis'];</code></pre>
                    </div>
                    
                    <div class="card" style="margin-top: 1rem;">
                        <h3>üéØ Verifica arrays vac√≠os</h3>
                        <pre><code>const resultados = [];

// ‚ùå No verifica
console.log(resultados[0]); // undefined

// ‚úÖ Verifica longitud
if (resultados.length > 0) {
    console.log(resultados[0]);
}</code></pre>
                    </div>
                    
                    <div class="card" style="margin-top: 1rem;">
                        <h3>üéØ Usa el m√©todo apropiado</h3>
                        <pre><code>// Si necesitas transformar ‚Üí map()
// Si necesitas filtrar ‚Üí filter()
// Si necesitas reducir a un valor ‚Üí reduce()
// Si necesitas iterar con efectos secundarios ‚Üí forEach()
// Si necesitas buscar un elemento ‚Üí find()
// Si necesitas verificar existencia ‚Üí some() / every()</code></pre>
                    </div>
                </div>
                
                <div class="content-section">
                    <h3>üìù Ejercicios de Repaso</h3>
                    
                    <div class="card" style="margin-top: 1rem;">
                        <p><strong>Ejercicio 1:</strong> Refactoriza este c√≥digo para evitar mutaciones:</p>
                        <pre><code>const tareas = ['Estudiar', 'Ejercicio'];
tareas.push('Compras');
tareas.sort();</code></pre>
                    </div>
                    
                    <div class="card" style="margin-top: 1rem;">
                        <p><strong>Ejercicio 2:</strong> Crea una funci√≥n que reciba un array y devuelva una copia profunda del mismo.</p>
                    </div>
                    
                    <div class="card" style="margin-top: 1rem;">
                        <p><strong>Ejercicio 3:</strong> Escribe una funci√≥n que compare dos arrays y retorne <code>true</code> si tienen el mismo contenido.</p>
                    </div>
                    
                    <div class="card" style="margin-top: 1rem;">
                        <p><strong>Ejercicio 4:</strong> Implementa una funci√≥n segura que procese un array, validando primero que el par√°metro sea efectivamente un array.</p>
                    </div>
                </div>
                
                <div class="content-section" style="margin-top: 2rem; background: linear-gradient(135deg, var(--button-bg), var(--button-hover)); color: white; text-align: center;">
                    <h2>üéâ ¬°Felicidades!</h2>
                    <p style="color: white; opacity: 0.95;">Has completado el m√≥dulo de Arrays. Ahora tienes las herramientas necesarias para trabajar eficientemente con arrays en JavaScript.</p>
                </div>
                
                <div class="page-navigation">
                    <a href="./07-tecnicas-avanzadas.html" class="page-nav-link prev">
                        <span>‚Üê Anterior</span>
                        <strong>7. T√©cnicas Avanzadas</strong>
                    </a>
                    <a href="../temario-global.html" class="page-nav-link next">
                        <span>Siguiente ‚Üí</span>
                        <strong>Volver al Temario Global</strong>
                    </a>
                </div>
            </section>
        </div>
    </main>
</body>
</html>
